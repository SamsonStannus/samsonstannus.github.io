<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><meta name="description" content="Learn how to build a personal website using Next.js"/><meta property="og:image" content="https://og-image.vercel.app/Next.js%20Sample%20Website.png?theme=light&amp;md=0&amp;fontSize=75px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><meta name="og:title" content="Next.js Sample Website"/><link rel="preload" as="image" imageSrcSet="https://samsonstannus.imgix.net/images/profile-close.jpg?auto=format&amp;fit=max&amp;w=128&amp;q=50 1x, https://samsonstannus.imgix.net/images/profile-close.jpg?auto=format&amp;fit=max&amp;w=256&amp;q=50 2x" fetchpriority="high"/><title>Nuances of Orthogonal A/B Tests</title><meta name="next-head-count" content="8"/><link rel="preload" href="/_next/static/css/bd411d70ee2f19e8.css" as="style"/><link rel="stylesheet" href="/_next/static/css/bd411d70ee2f19e8.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-cda2f1305c3d9424.js" defer=""></script><script src="/_next/static/chunks/main-7ac02ec3bd852e3f.js" defer=""></script><script src="/_next/static/chunks/pages/_app-2dfd096757008a0f.js" defer=""></script><script src="/_next/static/chunks/562-4133c4f313c5308e.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-d8628767e76dd496.js" defer=""></script><script src="/_next/static/NI5R_sDCP2XiJA1QvkAV7/_buildManifest.js" defer=""></script><script src="/_next/static/NI5R_sDCP2XiJA1QvkAV7/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="h-screen flex flex-col items-center"><div class="mt-10 md:mt-32 mx-10 max-w-none md:max-w-prose"><img alt="" fetchpriority="high" width="120" height="120" decoding="async" data-nimg="1" class="rounded-full" style="color:transparent" srcSet="https://samsonstannus.imgix.net/images/profile-close.jpg?auto=format&amp;fit=max&amp;w=128&amp;q=50 1x, https://samsonstannus.imgix.net/images/profile-close.jpg?auto=format&amp;fit=max&amp;w=256&amp;q=50 2x" src="https://samsonstannus.imgix.net/images/profile-close.jpg?auto=format&amp;fit=max&amp;w=256&amp;q=50"/><div class="text-xl"><div><div class="text-3xl font-bold">Nuances of Orthogonal A/B Tests</div><time class="font-mono text-gray-500" dateTime="2023-04-28">April 28, 2023</time></div><br/><div class="mb-3 first-line:uppercase first-line:tracking-widest first-letter:text-7xl first-letter:font-bold first-letter:mr-3 first-letter:float-left"><p>Every team I've worked on has, at one point or another, needed some A/B testing functionality. But as buckets become limited there's always a lot of pressure to start using Orthogonal A/B test groups.</p>
<p>While there is a place for Orthogonal A/B testing, I'd caution people from immediately thinking they've found endless buckets to use. I hope by outlining some gotchas of Orthogonal A/B testing you can make more informed decisions about when to stick with a single layer of A/B groups, and when it is in fact time to deploy overlapping experiments.</p>
<h2>What even is "Orthogonal" A/B Testing?</h2>
<p>You may know this style of experimenting as "Overlapping Test Splits". The idea is pretty straight forward. For a single layer of A/B testing you randomize users into different buckets. So, if you just use a different seed for each layer of A/B tests then the users in each layer should have a uniformly random chance of falling into any other layer of A/B tests. This allows you to run multiple experiments per user, and still have that gold standard of analyzing causality for your treatments in each layer.</p>
<p>To run orthogonal A/B tests you <em>only</em> need to make sure each experiment layer is statistically independent (I mean that's why it's called <em>orthogonal</em> after all). That being said, making sure everything is independent is much easier said than done.</p>
<h2>No free lunch</h2>
<p>There are some potential issues with overlapping tests, the obvious one being clashing experiments, i.e. not statistically independent.</p>
<p>A good example of this is if one team is testing background colors for a webpage, and another team is testing text colors. There will be some odd performance metrics when users end up with matching colors in the two separate layers of experiments.</p>
<p>Often times clashing experiments can be avoided with good domain boundaries between teams (there should really only be one layer of experiments for testing colors on a webpage). When experiment interference can't be avoided it's a pretty good code smell that these experiments should be part of the same layer.</p>
<h2>Can we avoid clashing experiments before hand?</h2>
<p>If only it were so simple. There are endless, unintuitive ways two experiments can interfere with one another.</p>
<p>That being said, it's really not worth the effort to think of every edge case in advance. Just split experimentation layers on intuition at first, and then let the data show you whre there are some non-independent layers. Worse case scenario is two teams have impacted each other's experiments. But you can just chalk it up to a great learning experience and improve your processes in the next round. Experimentation is about learning, and your A/B testing system is an experiment in and of itself!</p>
<h2>Apples &#x26; Oranges</h2>
<p>In my experience the outcome of A/B tests is <em>forecasting</em> value of a new treatment. When you have multiple layers of experiments, you have multiple layers of non-comparable forecasts.</p>
<p>As a quick aside, I loathe <em>forecasting revenue</em> in general. When you are asked to predict how much revenue a treatment will bring for the next quarter (or even the next <em>year</em>), just know that it will never truly be accurate. But not being accurate does not mean you can't have some fun with statistics and produce something useful. <a href="https://www.linkedin.com/pulse/you-cant-accurately-attribute-nor-forecast-revenue-heres-mannheim/">David Mannheim has a great series of posts on this.</a></p>
<p>The reason the forecasts are non-comparable is that each layer has a unique control from which a percentage increase on a metric has been computed. Controls should be as isolated as possible, but a control in Layer N has an evenly distributed assortment of all the treatments and controls of every other layer.</p>
<p>What I find a bit silly, is that sometimes executives will take all of the forecasts from the winning treatments in these separate layers and simply add them together. Since each each layer has a different baseline and the interaction of the two treatments has never been tested, it makes for a poor proxy of how the treatments combined would perform against the control on every layer.</p>
<p>A better approach would be to make a bundle of all the controls in each layer, and all the winning treatments in each layer and compare both bundles. Or a decent proxy would be to run treatment experiments from the layers in isolation against the same control and then compare their performance (note that if you're using frequentist approaches, you'd probably want to adjust the power of your experiment for all each comparison against the same control though). Which kind of brings us back to having just one layer of experiments.</p>
<h2>One layer to rule them all</h2>
<p>So, only using one layer makes comparing treatments a lot more sensible, but it has the draw back of limiting the number of simultaneous experiments that can be run. If you care about forecasting quantitative value, try to use one layer so you have a common and comparable baseline. It slows the rate of experiments, but makes the analysis more meaningful, and in my opinion that is a worthy trade off. On the other hand if you only care about directionality, which I'd highly recommend, then orthogonal a/b testing layers makes a lot of sense. Sometime it makes sense to use orthogonal layers when you are focused on quantitative values, especially if the metrics in layers are different.</p>
<p>All this to say, experiment with your experiments and find what works best for you.</p>
<p>For more on A/B testing, I'd recommend reading Ron Kohavi's <a href="https://experimentguide.com/">Trustworthy Online Controlled Experiments : A Practical Guide to A/B Testing</a></p>
</div></div><a class="text-xl pb-10" href="/">‚Üê back to home </a></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"nuances-of-orthogonal-ab-testing","contentHtml":"\u003cp\u003eEvery team I've worked on has, at one point or another, needed some A/B testing functionality. But as buckets become limited there's always a lot of pressure to start using Orthogonal A/B test groups.\u003c/p\u003e\n\u003cp\u003eWhile there is a place for Orthogonal A/B testing, I'd caution people from immediately thinking they've found endless buckets to use. I hope by outlining some gotchas of Orthogonal A/B testing you can make more informed decisions about when to stick with a single layer of A/B groups, and when it is in fact time to deploy overlapping experiments.\u003c/p\u003e\n\u003ch2\u003eWhat even is \"Orthogonal\" A/B Testing?\u003c/h2\u003e\n\u003cp\u003eYou may know this style of experimenting as \"Overlapping Test Splits\". The idea is pretty straight forward. For a single layer of A/B testing you randomize users into different buckets. So, if you just use a different seed for each layer of A/B tests then the users in each layer should have a uniformly random chance of falling into any other layer of A/B tests. This allows you to run multiple experiments per user, and still have that gold standard of analyzing causality for your treatments in each layer.\u003c/p\u003e\n\u003cp\u003eTo run orthogonal A/B tests you \u003cem\u003eonly\u003c/em\u003e need to make sure each experiment layer is statistically independent (I mean that's why it's called \u003cem\u003eorthogonal\u003c/em\u003e after all). That being said, making sure everything is independent is much easier said than done.\u003c/p\u003e\n\u003ch2\u003eNo free lunch\u003c/h2\u003e\n\u003cp\u003eThere are some potential issues with overlapping tests, the obvious one being clashing experiments, i.e. not statistically independent.\u003c/p\u003e\n\u003cp\u003eA good example of this is if one team is testing background colors for a webpage, and another team is testing text colors. There will be some odd performance metrics when users end up with matching colors in the two separate layers of experiments.\u003c/p\u003e\n\u003cp\u003eOften times clashing experiments can be avoided with good domain boundaries between teams (there should really only be one layer of experiments for testing colors on a webpage). When experiment interference can't be avoided it's a pretty good code smell that these experiments should be part of the same layer.\u003c/p\u003e\n\u003ch2\u003eCan we avoid clashing experiments before hand?\u003c/h2\u003e\n\u003cp\u003eIf only it were so simple. There are endless, unintuitive ways two experiments can interfere with one another.\u003c/p\u003e\n\u003cp\u003eThat being said, it's really not worth the effort to think of every edge case in advance. Just split experimentation layers on intuition at first, and then let the data show you whre there are some non-independent layers. Worse case scenario is two teams have impacted each other's experiments. But you can just chalk it up to a great learning experience and improve your processes in the next round. Experimentation is about learning, and your A/B testing system is an experiment in and of itself!\u003c/p\u003e\n\u003ch2\u003eApples \u0026#x26; Oranges\u003c/h2\u003e\n\u003cp\u003eIn my experience the outcome of A/B tests is \u003cem\u003eforecasting\u003c/em\u003e value of a new treatment. When you have multiple layers of experiments, you have multiple layers of non-comparable forecasts.\u003c/p\u003e\n\u003cp\u003eAs a quick aside, I loathe \u003cem\u003eforecasting revenue\u003c/em\u003e in general. When you are asked to predict how much revenue a treatment will bring for the next quarter (or even the next \u003cem\u003eyear\u003c/em\u003e), just know that it will never truly be accurate. But not being accurate does not mean you can't have some fun with statistics and produce something useful. \u003ca href=\"https://www.linkedin.com/pulse/you-cant-accurately-attribute-nor-forecast-revenue-heres-mannheim/\"\u003eDavid Mannheim has a great series of posts on this.\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThe reason the forecasts are non-comparable is that each layer has a unique control from which a percentage increase on a metric has been computed. Controls should be as isolated as possible, but a control in Layer N has an evenly distributed assortment of all the treatments and controls of every other layer.\u003c/p\u003e\n\u003cp\u003eWhat I find a bit silly, is that sometimes executives will take all of the forecasts from the winning treatments in these separate layers and simply add them together. Since each each layer has a different baseline and the interaction of the two treatments has never been tested, it makes for a poor proxy of how the treatments combined would perform against the control on every layer.\u003c/p\u003e\n\u003cp\u003eA better approach would be to make a bundle of all the controls in each layer, and all the winning treatments in each layer and compare both bundles. Or a decent proxy would be to run treatment experiments from the layers in isolation against the same control and then compare their performance (note that if you're using frequentist approaches, you'd probably want to adjust the power of your experiment for all each comparison against the same control though). Which kind of brings us back to having just one layer of experiments.\u003c/p\u003e\n\u003ch2\u003eOne layer to rule them all\u003c/h2\u003e\n\u003cp\u003eSo, only using one layer makes comparing treatments a lot more sensible, but it has the draw back of limiting the number of simultaneous experiments that can be run. If you care about forecasting quantitative value, try to use one layer so you have a common and comparable baseline. It slows the rate of experiments, but makes the analysis more meaningful, and in my opinion that is a worthy trade off. On the other hand if you only care about directionality, which I'd highly recommend, then orthogonal a/b testing layers makes a lot of sense. Sometime it makes sense to use orthogonal layers when you are focused on quantitative values, especially if the metrics in layers are different.\u003c/p\u003e\n\u003cp\u003eAll this to say, experiment with your experiments and find what works best for you.\u003c/p\u003e\n\u003cp\u003eFor more on A/B testing, I'd recommend reading Ron Kohavi's \u003ca href=\"https://experimentguide.com/\"\u003eTrustworthy Online Controlled Experiments : A Practical Guide to A/B Testing\u003c/a\u003e\u003c/p\u003e\n","title":"Nuances of Orthogonal A/B Tests","date":"2023-04-28","tag":"a/b testing"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"nuances-of-orthogonal-ab-testing"},"buildId":"NI5R_sDCP2XiJA1QvkAV7","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>